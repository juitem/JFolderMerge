<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>J-Folder Merge - Oscar Series</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=15">
</head>

<body>
    <div class="app-container">
        <header>
            <h1>J-Folder Merge - Oscar Series</h1>
            <div style="display: flex; gap: 0.5rem; align-items: center;">
                <button id="save-settings-btn" class="icon-btn" title="Save Current Settings">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                        <polyline points="17 21 17 13 7 13 7 21"></polyline>
                        <polyline points="7 3 7 8 15 8"></polyline>
                    </svg>
                </button>
                <button id="about-btn" class="icon-btn" title="About">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                </button>
            </div>
        </header>

        <div class="controls glass-panel">
            <!-- Inputs -->
            <div class="input-group">
                <input type="text" id="left-path" placeholder="/path/to/folder/A" autocomplete="off">
                <button id="history-left-btn" class="icon-btn" title="Recent Left Paths">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                </button>
                <button class="browse-btn icon-btn" data-target="left-path" data-type="directory" title="Browse">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                    </svg>
                </button>
            </div>

            <div class="input-group">
                <input type="text" id="right-path" placeholder="/path/to/folder/B" autocomplete="off">
                <button id="history-right-btn" class="icon-btn" title="Recent Right Paths">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                </button>
                <button class="browse-btn icon-btn" data-target="right-path" data-type="directory" title="Browse">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                    </svg>
                </button>
            </div>

            <button id="compare-btn" class="primary-btn">Compare</button>
        </div>

        <div class="toolbar glass-panel">
            <!-- Folder Filters -->
            <div class="filters-group">
                <span class="filter-label">Folder:</span>
                <label class="checkbox-container">
                    <input type="checkbox" id="folder-show-added" checked> <span class="checkmark added"></span>
                </label>
                <label class="checkbox-container">
                    <input type="checkbox" id="folder-show-removed" checked> <span class="checkmark removed"></span>
                </label>
                <label class="checkbox-container">
                    <input type="checkbox" id="folder-show-modified" checked> <span class="checkmark modified"></span>
                </label>
                <label class="checkbox-container">
                    <input type="checkbox" id="folder-show-same" checked> <span class="checkmark same"></span>
                </label>
            </div>

            <div class="separator"></div>

            <!-- Diff Filters -->
            <div class="filters-group">
                <span class="filter-label">Diff:</span>
                <label class="checkbox-container">
                    <input type="checkbox" id="diff-show-added" checked> <span class="checkmark added"></span>
                </label>
                <label class="checkbox-container">
                    <input type="checkbox" id="diff-show-removed" checked> <span class="checkmark removed"></span>
                </label>
                <label class="checkbox-container">
                    <input type="checkbox" id="diff-show-modified" checked> <span class="checkmark modified"></span>
                </label>
                <label class="checkbox-container">
                    <input type="checkbox" id="diff-show-same"> <span class="checkmark same"></span>
                </label>
            </div>

            <div class="separator"></div>

            <!-- View Toggles -->
            <div class="view-toggles">
                <button id="view-unified-btn" class="toggle-btn" title="Unified Diff View">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
                <button id="view-split-btn" class="toggle-btn active" title="Side-by-Side Diff View">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="12" y1="3" x2="12" y2="21"></line>
                    </svg>
                </button>
                <button id="view-both-btn" class="toggle-btn" title="Both Views">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="12" y1="12" x2="12" y2="21"></line>
                    </svg>
                </button>
            </div>

            <div class="separator"></div>

            <!-- Advanced View Options -->
            <div class="view-toggles">
                <button id="opt-default" class="toggle-btn active" title="Default View (Internal)">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <circle cx="12" cy="12" r="3"></circle>
                    </svg>
                </button>
                <button id="opt-auto-expand" class="toggle-btn" title="Auto-Expand Diff View">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="15 3 21 3 21 9"></polyline>
                        <polyline points="9 21 3 21 3 15"></polyline>
                        <line x1="21" y1="3" x2="14" y2="10"></line>
                        <line x1="3" y1="21" x2="10" y2="14"></line>
                    </svg>
                </button>
                <button id="opt-external-tool" class="toggle-btn" title="Use External Tool (Meld/Code)">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                        <polyline points="15 3 21 3 21 9"></polyline>
                        <line x1="10" y1="14" x2="21" y2="3"></line>
                    </svg>
                </button>
            </div>

            <div class="separator"></div>

            <!-- Search -->
            <div class="search-box" style="margin-left: 1rem; position: relative; display: flex; align-items: center;">
                <input type="text" id="file-search" placeholder="Search files..."
                    style="padding: 6px 10px; width: 200px; border-radius: 4px; border: 1px solid var(--border-color); background: var(--input-bg); color: var(--text-primary); font-size: 0.9rem;">
            </div>

            <!-- Excludes -->
            <!-- Excludes -->
            <div class="exclude-settings-compact" style="display:flex; gap:0.5rem; align-items:center;">
                <div class="path-row" style="display:flex; gap:0.5rem; align-items:center;">
                    <input type="text" id="exclude-folders" value="" placeholder="Excl. Folders"
                        title="Exclude Folders (comma separated)">
                    <button id="import-ignore-folder-btn" class="icon-btn" title="Import from IgnoreFolders/default">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z">
                            </path>
                        </svg>
                    </button>
                </div>
                <div class="path-row" style="display:flex; gap:0.5rem; align-items:center;">
                    <input type="text" id="exclude-files" value="" placeholder="Excl. Files"
                        title="Exclude Files (comma separated)">
                    <button id="import-ignore-file-btn" class="icon-btn" title="Import from IgnoreFiles/default">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                            <line x1="16" y1="13" x2="8" y2="13"></line>
                            <line x1="16" y1="17" x2="8" y2="17"></line>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <div class="main-view">
            <div class="tree-container glass-panel">
                <div class="tree-header">
                    <span>Structure</span>
                    <div class="legend">
                        <span class="status-dot added"></span> Added
                        <span class="status-dot removed"></span> Removed
                        <span class="status-dot modified"></span> Modified
                    </div>
                </div>
                <div class="split-tree-header">
                    <div class="tree-col-header">Left Folder</div>
                    <div class="tree-col-header">Right Folder</div>
                </div>
                <div class="split-tree-view">
                    <div id="tree-left" class="tree-column">
                        <div class="placeholder-text">Enter paths and click Compare.</div>
                    </div>
                    <div id="tree-right" class="tree-column">
                        <div class="placeholder-text"></div>
                    </div>
                </div>
            </div>

            <div id="diff-panel" class="diff-panel glass-panel hidden">
                <div class="diff-header">
                    <div class="window-controls">
                        <button id="expand-diff" class="icon-btn" title="Toggle Full Screen (ESC)">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <polyline points="15 3 21 3 21 9"></polyline>
                                <polyline points="9 21 3 21 3 15"></polyline>
                                <line x1="21" y1="3" x2="14" y2="10"></line>
                                <line x1="3" y1="21" x2="10" y2="14"></line>
                            </svg>
                        </button>
                        <button id="close-diff" class="icon-btn" title="Close">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <line x1="18" y1="6" x2="6" y2="18"></line>
                                <line x1="6" y1="6" x2="18" y2="18"></line>
                            </svg>
                        </button>
                    </div>
                    <span id="diff-filename">Select a file to compare</span>
                </div>
                <div id="diff-view-container" class="diff-view-container">
                    <pre id="diff-content" class="diff-content hidden"></pre>
                    <div id="diff-split" class="diff-split-view hidden">
                        <div id="diff-left" class="split-pane"></div>
                        <div id="diff-right" class="split-pane"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loader"></div>
        <div class="loading-text">Comparing...</div>
    </div>

    <!-- Modals are now generated dynamically by modal.js -->

    <script type="module" src="js/main.js?v=33"></script>
</body>

</html>